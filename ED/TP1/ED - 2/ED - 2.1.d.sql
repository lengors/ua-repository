/* SqlServer DDL Generated by BIM 1.0 */


CREATE TABLE "D_PROVIDER"
(
	"ID_PROVIDER" INT NOT NULL,
	"PROVIDER" VARCHAR(16) NOT NULL,
	"ABC" CHAR(16) NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_PROVIDER"
ADD CONSTRAINT "PK_D_PROVIDER" PRIMARY KEY NONCLUSTERED ("ID_PROVIDER")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_CLIENT"
(
	"ID_CLIENT" INT NOT NULL,
	"CARD_ID" INT NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_CLIENT"
ADD CONSTRAINT "PK_D_CLIENT" PRIMARY KEY NONCLUSTERED ("ID_CLIENT")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_DESTIN"
(
	"ID_DESTIN" INT NOT NULL,
	"DESTIN_PREFIX" CHAR(9) NOT NULL,
	"DETIN_LABEL" VARCHAR(256)
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_DESTIN"
ADD CONSTRAINT "PK_D_DESTIN" PRIMARY KEY NONCLUSTERED ("ID_DESTIN")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_SOURCE_LOCATION"
(
	"ID_SOURCE_LOCATION" INT NOT NULL,
	"CELL" VARCHAR(256) NOT NULL,
	"CITY" VARCHAR(64) NOT NULL,
	"DISTRICT" VARCHAR(64) NOT NULL,
	"MODEL" VARCHAR(64),
	"LOCATION_LAT/LON" VARCHAR(64),
	"COUNTRY" VARCHAR(64) NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_SOURCE_LOCATION"
ADD CONSTRAINT "PK_D_SOURCE_LOCATION" PRIMARY KEY NONCLUSTERED ("ID_SOURCE_LOCATION")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_TYPE"
(
	"ID_TYPE" INT NOT NULL,
	"TYPE" VARCHAR(16) NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_TYPE"
ADD CONSTRAINT "PK_D_TYPE" PRIMARY KEY NONCLUSTERED ("ID_TYPE")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_EVENT_TYPE"
(
	"ID_EVENT_TYPE" INT NOT NULL,
	"EVENT_TYPE" VARCHAR(10) NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_EVENT_TYPE"
ADD CONSTRAINT "PK_D_EVENT_TYPE" PRIMARY KEY NONCLUSTERED ("ID_EVENT_TYPE")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_SERVICE_TYPE"
(
	"ID_SERVICE_TYPE" INT NOT NULL,
	"SERVICE_TYPE" VARCHAR(16) NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_SERVICE_TYPE"
ADD CONSTRAINT "PK_D_SERVICE_TYPE" PRIMARY KEY NONCLUSTERED ("ID_SERVICE_TYPE")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_CARD"
(
	"ID_CARD" INT NOT NULL,
	"CARD_ID" INT NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_CARD"
ADD CONSTRAINT "PK_D_CARD" PRIMARY KEY NONCLUSTERED ("ID_CARD")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_PAYMENT_TYPE"
(
	"ID_PAYMENT_TYPE" INT NOT NULL,
	"PAYMENT_TYPE" VARCHAR(16) NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_PAYMENT_TYPE"
ADD CONSTRAINT "PK_D_PAYMENT_TYPE" PRIMARY KEY NONCLUSTERED ("ID_PAYMENT_TYPE")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "F_TRAFFIC_EVENT"
(
	"ID_DATE" INT NOT NULL,
	"ID_TIMESTAMP" INT NOT NULL,
	"ID_CLIENT" INT NOT NULL,
	"ID_DESTIN" INT NOT NULL,
	"ID_SOURCE_LOCATION" INT NOT NULL,
	"ID_EVENT_TYPE" INT NOT NULL,
	"ID_SERVICE_TYPE" INT NOT NULL,
	"CONSUMED_TIME" NUMERIC,
	"CONSUMED_VOL" NUMERIC,
	"CONSUMED_EVENTS" NUMERIC,
	"BILLED_TIME" NUMERIC,
	"BILLED_VOLUME" NUMERIC,
	"BILLED_EVENTS" NUMERIC
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "F_TRAFFIC_EVENT"
ADD CONSTRAINT "PK_F_TRAFFIC_EVENT" PRIMARY KEY NONCLUSTERED ("ID_DATE", "ID_TIMESTAMP", "ID_CLIENT", "ID_DESTIN", "ID_SOURCE_LOCATION", "ID_EVENT_TYPE", "ID_SERVICE_TYPE")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "F_RECHARGES"
(
	"ID_DATE" INT NOT NULL,
	"ID_CARD" INT NOT NULL,
	"ID_PAYMENT_TYPE" INT NOT NULL,
	"RECHARGED_MONEY" MONEY
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "F_RECHARGES"
ADD CONSTRAINT "PK_F_RECHARGES" PRIMARY KEY NONCLUSTERED ("ID_DATE", "ID_CARD", "ID_PAYMENT_TYPE")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_DATE"
(
	"ID_DATE" INT NOT NULL,
	"DAY" TINYINT NOT NULL,
	"DAY_OF_WEEK" TINYINT NOT NULL,
	"MONTH" TINYINT NOT NULL,
	"QUARTER" TINYINT NOT NULL,
	"YEAR" INT NOT NULL,
	"WEEK" TINYINT NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_DATE"
ADD CONSTRAINT "PK_D_DATE" PRIMARY KEY NONCLUSTERED ("ID_DATE")
WITH (DATA_COMPRESSION = NONE)
;

CREATE TABLE "D_TIMESTAMP"
(
	"ID_TIMESTAMP" INT NOT NULL,
	"TIMESTAMP" BIGINT NOT NULL,
	"HOUR" TINYINT NOT NULL,
	"PART_OF_THE_DAY" VARCHAR(16) NOT NULL
)
WITH (DATA_COMPRESSION = NONE);

ALTER TABLE "D_TIMESTAMP"
ADD CONSTRAINT "PK_D_TIMESTAMP" PRIMARY KEY NONCLUSTERED ("ID_TIMESTAMP")
WITH (DATA_COMPRESSION = NONE)
;

ALTER TABLE "F_TRAFFIC_EVENT"
ADD CONSTRAINT "FK_TRAFFIC_EVENT_DATE" FOREIGN KEY ("ID_DATE")
REFERENCES "D_DATE" ("ID_DATE")
;

ALTER TABLE "F_TRAFFIC_EVENT"
ADD CONSTRAINT "FK_TRAFFIC_EVENT_TIMESTAMP" FOREIGN KEY ("ID_TIMESTAMP")
REFERENCES "D_TIMESTAMP" ("ID_TIMESTAMP")
;

ALTER TABLE "F_TRAFFIC_EVENT"
ADD CONSTRAINT "FK_TRAFFIC_EVENT_CLIENT" FOREIGN KEY ("ID_CLIENT")
REFERENCES "D_CLIENT" ("ID_CLIENT")
;

ALTER TABLE "F_TRAFFIC_EVENT"
ADD CONSTRAINT "FK_TRAFFIC_EVENT_DESTIN" FOREIGN KEY ("ID_DESTIN")
REFERENCES "D_DESTIN" ("ID_DESTIN")
;

ALTER TABLE "F_TRAFFIC_EVENT"
ADD CONSTRAINT "FK_TRAFFIC_EVENT_SOURCE_LOCATION" FOREIGN KEY ("ID_SOURCE_LOCATION")
REFERENCES "D_SOURCE_LOCATION" ("ID_SOURCE_LOCATION")
;

ALTER TABLE "F_TRAFFIC_EVENT"
ADD CONSTRAINT "FK_TRAFFIC_EVENT_EVENT_TYPE" FOREIGN KEY ("ID_EVENT_TYPE")
REFERENCES "D_EVENT_TYPE" ("ID_EVENT_TYPE")
;

ALTER TABLE "F_TRAFFIC_EVENT"
ADD CONSTRAINT "FK_TRAFFIC_EVENT_SERVICE_TYPE" FOREIGN KEY ("ID_SERVICE_TYPE")
REFERENCES "D_SERVICE_TYPE" ("ID_SERVICE_TYPE")
;

ALTER TABLE "F_RECHARGES"
ADD CONSTRAINT "FK_RECHARGES_DATE" FOREIGN KEY ("ID_DATE")
REFERENCES "D_DATE" ("ID_DATE")
;

ALTER TABLE "F_RECHARGES"
ADD CONSTRAINT "FK_RECHARGES_CARD" FOREIGN KEY ("ID_CARD")
REFERENCES "D_CARD" ("ID_CARD")
;

ALTER TABLE "F_RECHARGES"
ADD CONSTRAINT "FK_RECHARGES_PAYMENT_TYPE" FOREIGN KEY ("ID_PAYMENT_TYPE")
REFERENCES "D_PAYMENT_TYPE" ("ID_PAYMENT_TYPE")
;

